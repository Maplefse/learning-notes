# Linux

## 虚拟器安装与linux系统安装:

https://blog.csdn.net/paotianzhou/article/details/97923351



Linxu账号密码:

root
3308945569



## Linux启动指令

```bash
sync	# 将数据由内存同步到硬盘中

shutdown	# 关机指令

roboot		# 重启

halt		# 关闭系统

# 无论是重启还是关闭系统,都要先运行sync保存数据
```

在Linux中,没有报错就代表操作成功

> 系统目录结构

1. 一切皆文件
2. 根目录/，所有的文件都挂载在这个节点下

> 控制台中输入 ls /

控制台输出如图所示：

![QQ截图20210523215152](\assets\QQ截图20210523215152.png)



树状目录结构：

![QQ截图20210523215444](\assets\QQ截图20210523215444.png)

## 目录功能解释：

- /bin : bin是Binary的缩写,这个目录存放着最经常使用的命令。
- /boot:这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。(不要动)
- /dev : dev是Device(设备)的缩写,存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。
- /etc :这个目录用来存放所有的系统管理所需要的配置文件和子目录。
- /home :用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。
- llib:这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。
- /lost+found:这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。(存放突然关机的一些文件)
- /media : linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。
- /mnt:系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。|
- /opt:这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。
- /proc:这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。
- /root :该目录为系统管理员，也称作超级权限者的用户主目录。
- /sbin : s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。. lsrv:该目录存放一些服务启动之后需要提取的数据。
- /sys :这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统sysfs 。
- /tmp:这个目录是用来存放一些临时文件的。
- /usr:这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。
- /usr/bin :系统用户使用的应用程序。
- /usrlsrc :内核源代码默认的放置目录。
- /var:这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。
- /run:是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。



## 常用的基本命令

linux中，使用tab键会自动补全需要输入的内容

### 目录管理

> 绝对路径、相对路径

绝对路径就是路径的全程，例如：C:\Program Files\Java

相对路径就是我们同目标文件的相对位置，例如：我们当前在Program Files文件中，Java文件对应我们的相对位置就是/Java

- cd：切换目录命令
- cd..：返回上一级目录
- ./：当前目录
- ls：列出目录
  - -a参数：all，查看全部的文件，包括隐藏文件
  - -l参数：列出所有的非隐藏文件，包括文件的属性和权限
- clear：清屏
- mkdir  文件名：创建文件夹
  - -p参数：创建多级目录
  - 例如：mkdir -p test1/test2/test3
- pwd ：显示当前用户所在的目录
- rmdir：删除文件，但只能删除空文件
  - -p 参数：强行删除不为空的目录
- cp 原来的文件  新的地址：复制文件
- rm：删除文件或目录
  - -f：忽略不存在的文件，不会出现警告，强制删除
  - -r：递归删除目录
  - -i：互动，删除前询问是否参数
  - rm -rf/ ：递归删除系统所有文件
- mv  原来的文件  新的地址：移动文件或者目录
  - -f ：强制移动
  - -u：只替换已经更新过的文件
- ifconfig  查看ip地址



### 文件基本属性

Linux系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限，为了保证系统的安全性，Linux系统的不同的用户访问同一文件的权限做了不同的规定

在Linux中可以使用==ll==或者==ls -l==命令来显示一个文件的属性以及文件所属的用户和组，如：



![QQ截图20210523225535](\assets\QQ截图20210523225535.png)

实例中，公共文件的第一个属性用“d”表示。“d”在Linux中代表该文件是一个目录文件。

在Linux中第一个字符串代表中国文件是目录，文件或者链接文件等

- 为[d]则是目录
- 为[-]则是文件
- 为[I]则表示为链接文档(link file);
- 为[b]则表示为装置文件里面的可供存储的接口设备(可随机存取装置)
- 为[c]则表示为装置文件里面的串行端口设备,例如键盘,鼠标(一次性读取装置)

接下来的字符以3个为一组,且均为[rwx]的三个参数的组合。

其中，[r]代表可读(read)、[w]代表可写（write）、[x]代表可执行（execute）。

要注意的是，这三个权限的位置不会改变，如果没有权限，就会出现[-]号

![QQ截图20210523230139](\assets\QQ截图20210523230139.png)

##### 修改文件属性命令

- chgrp ：更改文件属组

  - > chgrp [-R] 属组名  文件名

  - -R：递归更改文件属组，就跟是更改某个目录文件的属组时，加上-R参数后，该目录下的所有文件的属组都会更改

- chown：更改文件属主，也可以同时更改文件属组

  - > chown [-R] 属主名  文件名
    >
    > chown [-R] 属主名: 属组名  文件名

- chmod：更改文件9个属性

  - > chmod [-R] xyz 文件或目录

  Linux文件属性有两种设置方法，一种是数字，一种是符号。

  Linux文件的基本权限就有9个，分别是owner、group、other等，三种身份各有自己的read/write/execute权限。

  可以使用数字代表各个权限，权限对照如下：

  ```
  r:4    w:2   x:1
  
  可读可写不可执行,   rw  6
  可读可写可执行      rwx 7
  
  chmod 777 test   # 给以test文件最高权限,所有用户均可读可写可执行
  ```



### 文件内容查看

Linux系统中使用以下命令来查看文件的内容:

- cat：由第一行开始显示文件内容

- tac：从最后一行开始显示（tac就是cat的倒写）

- nl：显示的时候输出行号

- more：一页一页的显示文件内容

  - 显示后，使用空格代表翻页，enter代表向下一行，：f显示行号，按下q退出

- less：同more，但是它可以向前翻页

  - 空格翻页，↑↓键代表上下翻页
  - /要查询的字符  向下查询
  - ?要查询的字符  向上查询
  - 按下n表示继续查询下一个

- head：只看头几行

  - 通过-n参数要查看几行

  - > head -n 20 文件名   ：表示查看文件前20行

- tail：只看尾部几行

  - 同样可以使用-n

- > cat  文件名

可以使用man [命令]来查看各个命令的使用文档，例如：man cp。





## Vim编辑器

> Vim是什么

Vim 是从 vi 发展出来的一个文本编辑器。它类似于vi但又存在区别，因为它功能强大且高度可配置，在vi的基础上进行了很多的改进。**代码补全、编译及错误跳转**等方便编程的功能特别丰富，在程序员中被广泛使用，还可以创建和更改任何类型的文本，效率非常高。



基本上Vim分为三种模式,分别是命令模式（Command mode），输入模式（Insert mode），和底线命令模式（Last line mode）

##### **命令模式：**

只要启动vim，就进入命令模式。

此状态下敲击键盘动作会被Vim识别为命令，而不是输入字符。在这个状态下按下i键，即可切换到输入模式

以下是常用的几个命令：

- i切换到输入模式，以输入内容
- x删除当前光标所在处的字符
- shift+：切换到底线命令模式，以在最底一行输入命令

##### 输入模式：

在输入模式即可输入内容，输入模式有以下按键功能：

- 字符按键以及Shift组合：输入字符
- BACK SPACE：退格键，删除光标前一个字符
- DEL：删除键，删除光标后一个字符
- 方向键：在文本中移动光标
- HOME/END：移动光标到行首/行尾
- Page Up/Page Down：上/下翻页
- Insert：切换光标为输入/替换模式
- ESC：退出输入模式，切换到命令模式

##### 底线命令模式：

在命令模式下按下:（英文冒号）即可进入底线命令模式

底线命令模式可以输入单个或者多个字符的命令，基本的命令有：

- q：退出程序
- w：保存文件
- 可以直接使用wq保存并退出文件



ps：使用vim修改文件时，如果文件存在则修改，不存在则创建文件并修改





## 账号管理

Linux系统是一个多用户任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，任何以这个账号的身份进入系统。

用户的账号一方面可以帮助系统管理员对系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。

每个用户账号都有一个唯一的用户名和各自的密码

用户在登录时输入正确的用户名和口令后，就能够进入系统和自己的主目录

实现用户账户的管理，要完成的工作主要有以下几个方面：

- 用户账户的添加、删除与修改
- 用户口令的管理
- 用户组的管理



> 用户账户的管理

用户账户的管理工作主要涉及到用户账户的添加、修改和删除。

添加用户账户就是在系统中创建一个新账户，然后为新账户分配用户号、用户组、主目录和登录Shell等资源

> useradd 命令  添加用户

useradd -选项  用户名

-m：自动创建这个用户的主目录/home/maplef

-G：给用户分配组

```
[root@localhost home]# useradd -m xiao
[root@localhost home]# ls
1.txt  xiao
Linux中,一切皆文件,这里的添加用户说白了就是往某一个文件中写入用户的信息
```

> userdel :删除用户

userdel-r xiao ：删除用户的时候，将他的目录页一并删除



> usermod：修改用户

修改用户 usermod 对应修改的内容，修改哪个用户

```
usermod -d /home/233 xiao
```

修改完毕之后查看配置文件即可



> 切换用户

1. 切换用户的命令为：su 用户名
2. 普通用户切换到root用户，还可以使用命令：sudo su
3. 在终端输入exit或者logout或使用快捷方式ctrl+d，可以退回到原来用户，其实ctrl+d页数执行的exit命令
4. 在切换用户是，如果想在切换用户之后使用新用户的工作环境，可以在su和username之间加-，例如：【sr-root】
5. $表示普通用户
6. (#) 表示超级用户，也就是root用户



> hostname：查看主机名

hostname 新主机名 ：修改主机名，关机后失效

> 用户的密码设置问题

一般通过root创建用户的时候配置密码

如果是超级用户root的话:

```
passwd username
new password
re password
```

如果是普通用户:

```
passwd
(current) UNIX password:
new password: # 密码不能过于简单
re password:
```

> 锁定用户

例如,张三辞职了,需要冻结这个账户,一旦被冻结,账户就无法登录

```
passwd -l maplef	#锁定maplef这个用户
```

## 用户组管理

属主、属组

每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理（开发、测试、运维、root）。不同Lunix系统对用户组的规定有所不同，如Linux下的用户属于与他同名的用户组，这个用户组在创建用户时同时创建。

用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对/etc/group文件的更新。

> 创建一个用户组 groupadd	 组名

创建后使用：/etc/group查看

创建完组之后，可以得到一个组的id，这个id可以是指定的，通过：`-g id`。如果不指定，就会自增1

> 删除用户组  groupdel 	组名



> 修改用户组的权限信息和名字  groupmod -g id -n 新名字  旧名字
>
> ​	-g修改id
>
> ​	-n修改组名



> 切换用户的组

```bash
# 登录当前用户 maplef
$ newgrp root
```



## 磁盘管理

- df (列出文件系统整体的磁盘使用量) 

  - 添加-h参数即可将存储单位由字节改为m

  ![image-20210524225743554](\assets\image-20210524225743554-16518948723931.png)

- du (检查磁盘空间使用量)

  - 添加-a参数可以看到全部文件,包括隐藏文件与子文件

  ![image-20210524225953262](\assets\image-20210524225953262.png)

  - ​	du -sm /*语句![image-20210524230231070](\assets\image-20210524230231070.png)



## 进程管理

> 什么是进程

1. 在Linux中,每一个程序都有自己的一个进程,每一个进程都有一个id号
2. 每一个进程,都会有一个父进程
3. 进程可以有两种存在方式：前台！后台运行！
4. 一般的服务都是后台运行的，基本的程序都是前台运行的

### 命令

- ps	查看当前系统中正在执行的各种进程的信息

  - ps -a：显示当前终端运行的所有的进程信息
  - ps -u：以用户的信息显示进程
  - ps -x：显示后台运行进程的参数

  ```bash
  # ps -aux 查看所有的进程
  ps -aux|grep mysql	# 查看mysql的进程
  ps -aux|grep redis	# 查看redis的进程
  # 上面的命令解释:先查询到所有的进程,然后通过管道符过滤,在查询到的所有进程信息中过滤出mysql的进程信息再显示出来
  
  
  # | 在Linux中,这个叫做管道符
  # 例如 A|B,它会使用A命令的结果用于操作B命令
  # grep 查找文件中符合条件的字符串
  ```

  这里只需要记住一个统一格式：`ps-xx|grep 进程名字`      用于过滤进程信息

- ps -ef ：可以查看到父进程的信息

  ```bash
  ps -ef|grep mysql #看父进程一般可以通过目录树结构来查看
  
  # 显示一个进程树
  pstree -pu
  	-p	显示父id
  	-u	显示用户组
  ```

- `kill -9 进程的id`结束进程
  
  - 在服务器上，一般情况下不会直接结束进程
  - 当某处java代码进入死循环时，可以使用kill-9强制结束进程



## 环境安装

安装软件一般有三种方式：

- rpm（JDK：在线发布一个SpringBoot项目）
- 解压缩（tomcat，启动并通过外网访问，发布网站）
- yum在线安装（docker：直接安装运行）

### JDK安装(rpm安装)

开发java程序必要的环境

1. 下载JDK rpm，直接百度搜索

2. 安装java环境

   ```bash
   # 检查当前系统是否存在java环境, java -vuesion
   # 如果有的话就需要卸载
   # rpm -qa|grep jdk #检查JDK的版本
   # rpm -e --nodeps  jdk_	卸载jdk
   
   # 卸载完成后即可安装jdk
   # rpm -ivk rpm包
   ```

   ![image-20210525001921927](\assets\image-20210525001921927.png)

   ![image-20210525005352907](\assets\image-20210525005352907.png)

rpm安装及完成

现在来发布一个项目



### tomcat安装(gz解压缩安装)

1. 官网下载tomcat获得`apache-tomcat-9.0.46.tar.gz` .gz为后缀的文件

2. 上传到Linux中

   ![image-20210525102350224](\assets\image-20210525102350224.png)

3. 解压文件

   ```bash
   tar -zxvf apache-tomcat-9.0.46.tar.gz
   ```

   解压后获得如下文件

   ![image-20210525102555876](\assets\image-20210525102555876.png)

4. 启动tomcat ：./xxx.sh

   ```bash
   # 执行 ./startup.sh
   # 停止 ./shotdown.sh
   ```

   进入到tomcat项目的bin文件中启动

   ![image-20210525103152178](\assets\image-20210525103152178.png)

   完成!

   ### Docker(yum安装)

   

   ## 扩展：Vmware使用

   ### 快照

   保存当前系统信息为快照，随时可以回档，防止系统崩溃等问题

   一般在每次配置一个东西后就拍摄一次快照

   点击上方虚拟机 -》快照 -》 拍摄快照-》

   ![image-20210525105152908](\assets\image-20210525105152908.png)

   点击拍摄快照即可保存当前快照

   ### 本地网络配置

   需要保证Linux虚拟机和本机处在同一个网段！

   Windows

![image-20210525105616766](\assets\image-20210525105616766.png)

Linux也必须要配置到对应的网段 192.168.252.1

linux切换路径至/etc/sysconfig/network-scripts/
